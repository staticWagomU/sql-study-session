# 第1回：準備と最初のクエリ（GUI版）

## 本日のゴール
✅ DuckDB GUIを起動し、データをn行表示できるようになる

---

## 📚 座学（5-10分）

### 1. DuckDBとは？
- 軽量で高速なSQLデータベースエンジン
- インストールが簡単で、すぐに使い始められる
- CSVファイルを直接読み込んでSQLが実行できる
- **GUI版**：`duckdb -ui`で視覚的に操作できる

### 2. DuckDB GUIの起動方法
```bash
# プロジェクトディレクトリに移動
cd sql-study-session

# DuckDB GUIを起動
duckdb -ui
```

起動に成功すると、ブラウザが自動的に開き、DuckDBのGUIインターフェースが表示されます。

### 3. GUI画面の構成
画面は大きく3つのエリアに分かれています：
- **上部**：クエリ入力エリア（SQLを書く場所）
- **中央**：実行ボタン（▶ Run または Ctrl/Cmd + Enter）
- **下部**：結果表示エリア（実行結果が表形式で表示）

### 4. 基本的なSQLコマンド
```sql
SELECT * FROM 'ファイル名' LIMIT 10;
```

この構文の意味：
- `SELECT *`：すべての列を選択
- `FROM 'ファイル名'`：どのファイルからデータを読むか
- `LIMIT 10`：最初の10行だけ表示
- `;`（セミコロン）：コマンドの終了を示す（必須！）

### 5. データファイルの構成
私たちが使うデータ：
- `customers.csv`：顧客データ（7人）
- `products.csv`：商品データ（5商品）
- `sales.csv`：売上データ（15件）

---

## 💻 演習（20-25分）

### 演習1：DuckDB GUIの起動確認（全員で一緒に）
1. ターミナルで`pwd`コマンドを実行し、`sql-study-session`ディレクトリにいることを確認
2. `duckdb -ui`を実行
3. ブラウザが自動的に開くことを確認
4. GUI画面の各エリアを確認

### 演習2：sales.csvの中身を5行だけ表示
1. **クエリ入力エリア**に以下を入力：
```sql
SELECT * FROM 'data/sales.csv' LIMIT 5;
```

2. **実行ボタン**をクリック（または Ctrl/Cmd + Enter）

3. **結果表示エリア**で以下のような結果を確認：
```
┌─────────────┬────────────┬──────────┬────────────┐
│ customer_id │ product_id │ quantity │ order_date │
│   varchar   │  varchar   │  int64   │  varchar   │
├─────────────┼────────────┼──────────┼────────────┤
│ C001        │ P001       │        5 │ 2024-01-15 │
│ C002        │ P003       │        2 │ 2024-01-16 │
│ C001        │ P002       │       10 │ 2024-01-17 │
│ C003        │ P001       │        3 │ 2024-01-18 │
│ C002        │ P004       │        1 │ 2024-01-19 │
└─────────────┴────────────┴──────────┴────────────┘
```

### 演習3：products.csvの中身を10行表示
1. クエリ入力エリアをクリアして新しいクエリを入力：
```sql
SELECT * FROM 'data/products.csv' LIMIT 10;
```

2. 実行して結果を確認（商品は5つしかないので、5行すべて表示されます）

### 演習4：customers.csvの中身を3行だけ表示
```sql
SELECT * FROM 'data/customers.csv' LIMIT 3;
```

💡 **GUI操作のコツ**：
- クエリ入力エリアでは、複数行に分けて書くことも可能
- 実行履歴は画面に残るので、前のクエリを参考にできる
- 結果はExcelのような表形式で見やすく表示される

---

## 🎯 練習問題

### 1. LIMITを使わずに実行してみよう
```sql
SELECT * FROM 'data/sales.csv';
```
→ 全15件のデータが表示されることを確認

### 2. LIMIT 1でどうなるか確認
```sql
SELECT * FROM 'data/products.csv' LIMIT 1;
```
→ 最初の1行だけ表示される

### 3. エラーを体験してみよう
```sql
SELECT * FROM 'data/test.csv' LIMIT 5;
```
→ ファイルが存在しないというエラーメッセージが表示される

---

## 📝 まとめ

今日学んだこと：
- ✅ DuckDB GUIの起動方法（`duckdb -ui`）
- ✅ GUI画面の3つのエリア（クエリ入力、実行、結果表示）
- ✅ `SELECT * FROM 'ファイル名' LIMIT n;` の基本構文
- ✅ セミコロン（`;`）の重要性
- ✅ CSVファイルから直接データを読み込む方法

### GUIの便利な機能
- **自動補完**：入力中に候補が表示される場合がある
- **エラー表示**：構文エラーが分かりやすく表示される
- **結果のエクスポート**：結果をCSVなどで保存可能

---

## 🚀 次回予告
第2回では、必要な列だけを選んで表示する方法を学びます。
GUIだと列名も見やすく、どの列を選ぶか視覚的に確認しながら進められます！

---

## ❓ よくある質問

**Q: ブラウザが開かない**
A: ファイアウォールやセキュリティソフトが原因の可能性があります。表示されるURLを手動でブラウザに入力してください。

**Q: クエリが実行されない**
A: セミコロン（`;`）を忘れていませんか？また、実行ボタンをクリックするか、Ctrl/Cmd + Enterを押してください。

**Q: 文字化けしている**
A: ブラウザの文字エンコーディングがUTF-8になっているか確認してください。